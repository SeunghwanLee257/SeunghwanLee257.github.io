<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 300">
  <defs>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&amp;display=swap');
    </style>
    <linearGradient id="flowGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#0066FF"/>
      <stop offset="100%" style="stop-color:#00D4AA"/>
    </linearGradient>
  </defs>

  <!-- Background -->
  <rect width="800" height="300" fill="#1E293B"/>

  <!-- Step 1: STO Transaction -->
  <g transform="translate(40, 80)">
    <rect width="140" height="120" rx="12" fill="#F8FAFC" stroke="#0066FF" stroke-width="2"/>
    <text x="70" y="30" text-anchor="middle" fill="#0066FF" font-family="Inter, sans-serif" font-size="11" font-weight="600">STO 거래</text>

    <!-- Person icons for sender/receiver -->
    <g transform="translate(20, 45) scale(1.2)">
      <path fill="#0066FF" d="M12 2.5a5.5 5.5 0 0 1 3.096 10.047 9.005 9.005 0 0 1 5.9 8.181.75.75 0 1 1-1.499.044 7.5 7.5 0 0 0-14.993 0 .75.75 0 0 1-1.5-.045 9.005 9.005 0 0 1 5.9-8.18A5.5 5.5 0 0 1 12 2.5ZM8 8a4 4 0 1 0 8 0 4 4 0 0 0-8 0Z"/>
    </g>
    <text x="45" y="100" text-anchor="middle" fill="#64748B" font-family="Inter, sans-serif" font-size="9">송신자</text>

    <path d="M60 75 L80 75" stroke="#94A3B8" stroke-width="2"/>
    <polygon points="80,75 75,72 75,78" fill="#94A3B8"/>

    <g transform="translate(72, 45) scale(1.2)">
      <path fill="#00D4AA" d="M12 2.5a5.5 5.5 0 0 1 3.096 10.047 9.005 9.005 0 0 1 5.9 8.181.75.75 0 1 1-1.499.044 7.5 7.5 0 0 0-14.993 0 .75.75 0 0 1-1.5-.045 9.005 9.005 0 0 1 5.9-8.18A5.5 5.5 0 0 1 12 2.5ZM8 8a4 4 0 1 0 8 0 4 4 0 0 0-8 0Z"/>
    </g>
    <text x="98" y="100" text-anchor="middle" fill="#64748B" font-family="Inter, sans-serif" font-size="9">수신자</text>
  </g>

  <!-- Arrow 1 -->
  <path d="M190 140 L230 140" stroke="url(#flowGrad)" stroke-width="2"/>
  <polygon points="230,140 222,136 222,144" fill="#00D4AA"/>

  <!-- Step 2: LatticA Privacy Layer -->
  <g transform="translate(240, 60)">
    <rect width="200" height="160" rx="12" fill="#F8FAFC" stroke="#00D4AA" stroke-width="2"/>
    <rect x="0" y="0" width="200" height="35" rx="12" fill="rgba(0,212,170,0.1)"/>
    <text x="100" y="24" text-anchor="middle" fill="#00D4AA" font-family="Inter, sans-serif" font-size="12" font-weight="700">LatticA Privacy Layer</text>

    <!-- ZKP Box -->
    <rect x="15" y="50" width="80" height="45" rx="6" fill="#F1F5F9" stroke="#0066FF" stroke-width="1"/>
    <text x="55" y="70" text-anchor="middle" fill="#0066FF" font-family="Inter, sans-serif" font-size="9" font-weight="600">ZK Proof</text>
    <text x="55" y="85" text-anchor="middle" fill="#64748B" font-family="Inter, sans-serif" font-size="8">유효성 검증</text>

    <!-- FHE Box -->
    <rect x="105" y="50" width="80" height="45" rx="6" fill="#F1F5F9" stroke="#00D4AA" stroke-width="1"/>
    <text x="145" y="70" text-anchor="middle" fill="#00D4AA" font-family="Inter, sans-serif" font-size="9" font-weight="600">FHE 암호화</text>
    <text x="145" y="85" text-anchor="middle" fill="#64748B" font-family="Inter, sans-serif" font-size="8">금액/주소 보호</text>

    <!-- Output -->
    <rect x="30" y="110" width="140" height="35" rx="6" fill="#F1F5F9"/>
    <text x="100" y="125" text-anchor="middle" fill="#64748B" font-family="Inter, sans-serif" font-size="9">암호화된 거래 데이터</text>
    <text x="100" y="138" text-anchor="middle" fill="#00D4AA" font-family="Monaco, monospace" font-size="8">Enc(금액) + ZK Proof</text>
  </g>

  <!-- Arrow 2 -->
  <path d="M450 140 L490 140" stroke="url(#flowGrad)" stroke-width="2"/>
  <polygon points="490,140 482,136 482,144" fill="#00D4AA"/>

  <!-- Step 3: Blockchain -->
  <g transform="translate(500, 80)">
    <rect width="130" height="120" rx="12" fill="#F8FAFC" stroke="#E2E8F0" stroke-width="2"/>
    <text x="65" y="30" text-anchor="middle" fill="#1E293B" font-family="Inter, sans-serif" font-size="11" font-weight="600">블록체인</text>

    <!-- Encrypted data representation -->
    <rect x="15" y="45" width="100" height="25" rx="4" fill="#F1F5F9"/>
    <text x="65" y="62" text-anchor="middle" fill="#00D4AA" font-family="Monaco, monospace" font-size="8">Enc(₩???)</text>

    <rect x="15" y="75" width="100" height="25" rx="4" fill="#F1F5F9"/>
    <text x="65" y="92" text-anchor="middle" fill="#0066FF" font-family="Monaco, monospace" font-size="8">ZK: Valid ✓</text>
  </g>

  <!-- Arrow 3 (to regulator) -->
  <path d="M695 140 L720 140 L720 230 L695 230" stroke="#0066FF" stroke-width="2" fill="none" stroke-dasharray="4"/>
  <polygon points="695,230 703,226 703,234" fill="#0066FF"/>

  <!-- Step 4: Regulator (Optional Audit) -->
  <g transform="translate(500, 200)">
    <rect width="130" height="70" rx="12" fill="#F8FAFC" stroke="#0066FF" stroke-width="2" stroke-dasharray="4"/>
    <text x="65" y="25" text-anchor="middle" fill="#0066FF" font-family="Inter, sans-serif" font-size="10" font-weight="600">감독 기관</text>
    <text x="65" y="45" text-anchor="middle" fill="#64748B" font-family="Inter, sans-serif" font-size="9">FHE 상태로 감사</text>
    <text x="65" y="60" text-anchor="middle" fill="#00D4AA" font-family="Inter, sans-serif" font-size="9" font-weight="600">AML/KYC 준수</text>
  </g>

  <!-- Legend -->
  <rect x="40" y="255" width="10" height="10" fill="#00D4AA"/>
  <text x="55" y="264" fill="#64748B" font-family="Inter, sans-serif" font-size="9">암호화된 데이터</text>

  <rect x="160" y="255" width="10" height="10" fill="#0066FF"/>
  <text x="175" y="264" fill="#64748B" font-family="Inter, sans-serif" font-size="9">검증 가능</text>

  <rect x="260" y="255" width="30" height="10" fill="none" stroke="#0066FF" stroke-width="1" stroke-dasharray="3"/>
  <text x="295" y="264" fill="#64748B" font-family="Inter, sans-serif" font-size="9">선택적 감사</text>
</svg>
